var TableDatatablesEditable = function () {
    var e = function () {
        function e(e, t) {
            for (var n = e.fnGetData(t), a = $(">td", t), l = 0, r = a.length; r > l; l++)e.fnUpdate(n[l], t, l, !1);
            e.fnDraw()
        }

        function t(e, t) {
            var n = e.fnGetData(t), a = $(">td", t);
            a[0].innerHTML = '<input type="text" class="form-control input-small" value="' + n[0] + '">', a[1].innerHTML = '<input type="text" class="form-control input-small" value="' + n[1] + '">', a[2].innerHTML = '<input type="text" class="form-control input-small" value="' + n[2] + '">', a[3].innerHTML = '<input type="text" class="form-control input-small" value="' + n[3] + '">', a[4].innerHTML = '<button type="button" class="edit btn btn-circle btn-fit-height btn-success btn-xs" href="">Save</button>', a[5].innerHTML = '<button class="cancel btn btn-circle btn-fit-height btn-warning btn-xs" href="">Cancel</button>'
        }

        function n(e, t) {
            var n = $("input", t);
            e.fnUpdate(n[0].value, t, 0, !1), e.fnUpdate(n[1].value, t, 1, !1), e.fnUpdate(n[2].value, t, 2, !1), e.fnUpdate(n[3].value, t, 3, !1), e.fnUpdate('<a class="edit" href="">Edit</a>', t, 4, !1), e.fnUpdate('<a class="delete" href="">Delete</a>', t, 5, !1), e.fnDraw()
        }

        var a = $("#sample_editable_1"), l = a.dataTable({
            scrollY:"300px",
            scrollCollapse:false,
            "searching": false,
            lengthMenu: [
            [5, 15, 20, -1],
            [5, 15, 20, "All"]
        ] /*pageLength: 10, language: {lengthMenu: "每页 _MENU_ 条"}*/, columnDefs: [
            {orderable: !0, targets: [0]}
           // {searchable: !0, targets: [0]}
        ], order: [
            [0, "asc"]
        ]}), r = ($("#sample_editable_1_wrapper"), null), o = !1;
        $("#sample_editable_1_new").click(function (e) {
            if (e.preventDefault(), o && r) {
                if (!confirm("尚未保存，是否需要保存?"))return l.fnDeleteRow(r), r = null, void(o = !1);
                n(l, r), $(r).find("td:first").html("Untitled"), r = null, o = !1
            }
            var a = l.fnAddData(["", "", "", "", "", ""]), i = l.fnGetNodes(a[0]);
            t(l, i), r = i, o = !0
        }), a.on("click", ".delete", function (e) {
            if (e.preventDefault(), 0 != confirm("确认删除这一条吗?")) {
                var t = $(this).parents("tr")[0];
                deletefun(), l.fnDeleteRow(t), alert("已删除！")
            }
        }), a.on("click", ".cancel", function (t) {
            t.preventDefault(), o ? (l.fnDeleteRow(r), r = null, o = !1) : (e(l, r), r = null)
        }), a.on("click", ".edit", function (a) {
            a.preventDefault();
            var o = $(this).parents("tr")[0];
            null !== r && r != o ? (e(l, r), t(l, o), r = o) : r == o && "Save" == this.innerHTML ? (updatefun(),n(l, r), r = null, alert("操作成功！")) : (t(l, o), r = o)
        })
    };
    return{init: function () {
        e()
    }}
}();
jQuery(document).ready(function () {
    TableDatatablesEditable.init()
});
function deletefun(){
    alert("connect ");

}
function updatefun(){
    alert("update");

}
